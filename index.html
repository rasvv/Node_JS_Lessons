<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Socket</title>
    <script src="https://cdn.socket.io/4.2.0/socket.io.min.js" integrity="sha384-PiBR5S00EtOj2Lto9Uu81cmoyZqR57XcOna1oAuVuIEjzj0wpqDVfD0JA9eXlRsj" crossorigin="anonymous"></script>
</head>
<body>
	<div class="messageblock">
		<input class="input" id="input1" type="text" autofocus>
		<button class="button" id="button1">Send</button>
		<div class="messages" id="messages1"></div>
	</div>
	<div class="messageblock">
		<input class="input" id="input2" type="text" >
		<button class="button" id="button2">Send</button>
		<div class="messages" id="messages2"></div>
	</div>
	<div class="messageblock">
		<input class="input" id="input3" type="text" >
		<button class="button" id="button3">Send</button>
		<div class="messages" id="messages3"></div>
	</div>
	<div class="messageblock">
		<input class="input" id="input4" type="text" >
		<button class="button" id="button4">Send</button>
		<div class="messages" id="messages4"></div>
	</div>
	<div class="messageblock">
		<input class="input" id="input5" type="text" >
		<button class="button" id="button5">Send</button>
		<div class="messages" id="messages5"></div>
	</div>
	<div class="messageblock">
		<input class="input" id="input6" type="text" >
		<button class="button" id="button6">Send</button>
		<div class="messages" id="messages6"></div>
	</div>
	<div class="messageblock">
		<input class="input" id="input7" type="text" >
		<button class="button" id="button7">Send</button>
		<div class="messages" id="messages7"></div>
	</div>
	<div class="messageblock">
		<input class="input" id="input8" type="text">
		<button class="button" id="button8">Send</button>
		<div class="messages" id="messages8"></div>
	</div>

	<script>
	    const socket = io('localhost:8082')
	    // const messageOutput = document.getElementById('messages')
	    const messageOutput = document.querySelectorAll('messages')
	    // const sendButton = document.getElementsByClassName('button')
	    const sendButton = document.querySelectorAll('button')
	    // const input = document.getElementsByClassName('input')
	    const input = document.querySelectorAll('input')

			console.log(sendButton);


     socket.on('connect', () => {
	        console.log('connected')
	    });
			
	    socket.emit('client-msg', 'test');

	    sendButton.forEach((button, id) => {
				button.onclick = () => {
					console.log('input[id].value '+id +' '+ input[id].value)
					console.log('messageOutput[id] '+id +' '+ messageOutput[id])
		        const data = {
		            message: input[id].value,
								id: id,
		        };

		        socket.emit('client-msg', data)
		    }

		    socket.on('server-msg', ({ message, nick, id }) => {
					// console.log(messageOutput);
					// messageOutput[id].insertAdjacentHTML('beforeend', `<p>Сообщение: ${message}</p><p>Автор: ${nick}</p>`)
		    })
			})
	</script>
</body>
<style>
	body {
		display: grid;
		grid-template-columns: repeat(8, 1fr);
	}
	.messages {
		border: 1px solid #000;
		height: 50px;
	}

</style>
</html>
